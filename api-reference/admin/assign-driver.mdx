---
title: "Assign Driver"
openapi: "POST /api/admin/bookings/{id}/assign"
---

Assign a driver to a booking.

## Authorization

<Info>Requires ADMIN role. Include JWT token in the Authorization header.</Info>

```
Authorization: Bearer <token>
```

## Path Parameters

| Parameter | Type   | Description  |
| --------- | ------ | ------------ |
| `id`      | string | Booking UUID |

## Request Body

```json
{
  "driverId": "driver-uuid"
}
```

## Response

<Tabs>
  <Tab title="200 OK">
    ```json
    {
      "id": "booking-uuid",
      "status": "ASSIGNED",
      "driverId": "driver-uuid",
      "driver": {
        "id": "driver-uuid",
        "fullName": "Driver Name",
        "phone": "+94771234567"
      },
      "message": "Driver assigned successfully"
    }
    ```
  </Tab>
  <Tab title="400 Bad Request">
    ```json
    {
      "statusCode": 400,
      "message": "Booking is not in a valid state for assignment"
    }
    ```
  </Tab>
  <Tab title="404 Not Found">
    ```json
    {
      "statusCode": 404,
      "message": "Booking or driver not found"
    }
    ```
  </Tab>
</Tabs>

## Example

```bash
curl -X POST "https://api.trash2cash.lk/api/admin/bookings/booking-uuid/assign" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{ "driverId": "driver-uuid" }'
```

## Assignment Rules

| Booking Status | Can Assign             |
| -------------- | ---------------------- |
| `PENDING`      | ✅ Yes (auto-confirms) |
| `CONFIRMED`    | ✅ Yes                 |
| `ASSIGNED`     | ✅ Yes (reassign)      |
| `IN_PROGRESS`  | ❌ No                  |
| `COMPLETED`    | ❌ No                  |
| `CANCELLED`    | ❌ No                  |

## Notes

- Driver receives a push notification when assigned
- Booking status changes to `ASSIGNED`
- If booking was `PENDING`, it's also confirmed
- Previous driver (if any) is notified of reassignment
