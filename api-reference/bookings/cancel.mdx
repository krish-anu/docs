---
title: "Cancel Booking"
openapi: "POST /api/bookings/{id}/cancel"
---

Cancel a booking.

## Authorization

<Info>
  Requires authentication. Include JWT token in the Authorization header.
</Info>

```
Authorization: Bearer <token>
```

## Path Parameters

| Parameter | Type   | Description  |
| --------- | ------ | ------------ |
| `id`      | string | Booking UUID |

## Request Body (Optional)

```json
{
  "reason": "Unable to be at home during scheduled time"
}
```

## Response

<Tabs>
  <Tab title="200 OK">
    ```json
    {
      "id": "booking-uuid",
      "status": "CANCELLED",
      "message": "Booking cancelled successfully"
    }
    ```
  </Tab>
  <Tab title="400 Bad Request">
    ```json
    {
      "statusCode": 400,
      "message": "Cannot cancel a completed booking"
    }
    ```
  </Tab>
  <Tab title="404 Not Found">
    ```json
    {
      "statusCode": 404,
      "message": "Booking not found"
    }
    ```
  </Tab>
</Tabs>

## Example

```bash
curl -X POST "https://api.trash2cash.lk/api/bookings/booking-uuid/cancel" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{ "reason": "Schedule conflict" }'
```

## Cancellation Rules

| Status      | Can Cancel                  |
| ----------- | --------------------------- |
| `SCHEDULED` | ✅ Yes                      |
| `COLLECTED` | ✅ Yes (driver is notified) |
| `PAID`      | ❌ No                       |
| `COMPLETED` | ❌ No                       |
| `CANCELLED` | ❌ Already cancelled        |
| `REFUNDED`  | ❌ Already refunded         |

## Notes

- Only the booking owner or admin can cancel
- Driver is notified when an assigned booking is cancelled
- Cancellation reason is optional but recommended
