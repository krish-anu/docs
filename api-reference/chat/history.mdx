---
title: "Chat History"
openapi: "GET /api/chat/history"
---

Get chat history for real-time messaging between users and support staff.

## Authorization

<Info>
  Requires authentication. Include JWT token in the Authorization header.
</Info>

```
Authorization: Bearer <token>
```

## Query Parameters

| Parameter | Type   | Default | Description                |
| --------- | ------ | ------- | -------------------------- |
| `limit`   | number | 50      | Maximum messages to return |

## Response

<Tabs>
  <Tab title="200 OK">
    ```json
    {
      "messages": [
        {
          "id": "msg-uuid-1",
          "senderId": "user-uuid",
          "senderName": "John Doe",
          "senderType": "user",
          "content": "What types of waste do you accept?",
          "createdAt": "2024-01-25T14:28:00Z"
        },
        {
          "id": "msg-uuid-2",
          "senderId": "support-uuid",
          "senderName": "Support Agent",
          "senderType": "support",
          "content": "We accept various types of recyclable waste including plastics, paper, and metals.",
          "createdAt": "2024-01-25T14:28:05Z"
        },
        {
          "id": "msg-uuid-3",
          "senderId": "user-uuid",
          "senderName": "John Doe",
          "senderType": "user",
          "content": "How do I schedule a pickup?",
          "createdAt": "2024-01-25T14:30:00Z"
        },
        {
          "id": "msg-uuid-4",
          "senderId": "support-uuid",
          "senderName": "Support Agent",
          "senderType": "support",
          "content": "To schedule a pickup, use the Bookings section in the app. Select your preferred date and time.",
          "createdAt": "2024-01-25T14:30:05Z"
        }
      ],
      "total": 4
    }
    ```
  </Tab>
</Tabs>

## Example

```bash
# Get last 50 messages (default)
curl "https://api.trash2cash.lk/api/chat/history" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# Get last 10 messages
curl "https://api.trash2cash.lk/api/chat/history?limit=10" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

## Message Types

| Sender Type | Description                 |
| ----------- | --------------------------- |
| `user`      | Message sent by the user    |
| `support`   | Response from support staff |

## Notes

- Messages are ordered chronologically (oldest first)
- History is persisted across sessions
- Each user has their own chat history
- Real-time WebSocket updates available via `/api/chat` gateway
