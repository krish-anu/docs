---
title: "Environment Variables"
description: "Required environment configuration for Trash2Cash"
---

## Overview

Trash2Cash requires several environment variables for proper operation. Create `.env` files in both client and server directories.

## Server Environment Variables

Create `server/.env`:

```bash
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/trash2cash"

# JWT
JWT_SECRET="your-super-secret-jwt-key-min-32-chars"

# Server
PORT=3001
NODE_ENV=development

# Client URL (for CORS)
CLIENT_URL="http://localhost:3000"

# Redis (optional)
REDIS_URL="redis://localhost:6379"

# Email (for OTP verification)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM="Trash2Cash <noreply@trash2cash.lk>"

# Push Notifications (VAPID)
VAPID_PUBLIC_KEY="your-vapid-public-key"
VAPID_PRIVATE_KEY="your-vapid-private-key"
VAPID_SUBJECT="mailto:admin@trash2cash.lk"
```

## Client Environment Variables

Create `client/.env.local`:

```bash
# API URL
NEXT_PUBLIC_API_URL="http://localhost:3001/api"

# Push Notifications
NEXT_PUBLIC_VAPID_PUBLIC_KEY="your-vapid-public-key"
```

## Variable Reference

### Database

| Variable       | Description                  | Required | Example                               |
| -------------- | ---------------------------- | -------- | ------------------------------------- |
| `DATABASE_URL` | PostgreSQL connection string | ✅       | `postgresql://user:pass@host:5432/db` |

### Authentication

| Variable     | Description                               | Required | Example                          |
| ------------ | ----------------------------------------- | -------- | -------------------------------- |
| `JWT_SECRET` | Secret key for JWT signing (min 32 chars) | ✅       | `super-secret-key-here-32-chars` |

### Server Configuration

| Variable     | Description         | Required | Default                 |
| ------------ | ------------------- | -------- | ----------------------- |
| `PORT`       | Server port         | ❌       | `3001`                  |
| `NODE_ENV`   | Environment mode    | ❌       | `development`           |
| `CLIENT_URL` | Client URL for CORS | ✅       | `http://localhost:3000` |

### Redis

| Variable    | Description          | Required | Example                  |
| ----------- | -------------------- | -------- | ------------------------ |
| `REDIS_URL` | Redis connection URL | ❌       | `redis://localhost:6379` |

### Email (SMTP)

| Variable    | Description                | Required |
| ----------- | -------------------------- | -------- |
| `SMTP_HOST` | SMTP server host           | ✅       |
| `SMTP_PORT` | SMTP server port           | ✅       |
| `SMTP_USER` | SMTP username/email        | ✅       |
| `SMTP_PASS` | SMTP password/app password | ✅       |
| `SMTP_FROM` | From email address         | ✅       |

### Push Notifications

| Variable            | Description             | Required |
| ------------------- | ----------------------- | -------- |
| `VAPID_PUBLIC_KEY`  | VAPID public key        | ✅       |
| `VAPID_PRIVATE_KEY` | VAPID private key       | ✅       |
| `VAPID_SUBJECT`     | VAPID subject (mailto:) | ✅       |

## Generating Keys

### JWT Secret

```bash
# Generate a random 64-character secret
openssl rand -base64 48
```

### VAPID Keys

```bash
# Using web-push package
npx web-push generate-vapid-keys
```

Output:

```
Public Key: BNxK...your-public-key
Private Key: your-private-key
```

## Environment Files by Stage

### Development

```bash
# server/.env
DATABASE_URL="postgresql://trash2cash:trash2cash@localhost:5432/trash2cash"
JWT_SECRET="dev-secret-key-for-local-development-only"
NODE_ENV=development
CLIENT_URL="http://localhost:3000"

# client/.env.local
NEXT_PUBLIC_API_URL="http://localhost:3001/api"
```

### Staging

```bash
# server/.env.staging
DATABASE_URL="postgresql://user:pass@staging-db:5432/trash2cash_staging"
JWT_SECRET="staging-secret-key-32-characters"
NODE_ENV=staging
CLIENT_URL="https://staging.trash2cash.lk"

# client/.env.staging
NEXT_PUBLIC_API_URL="https://api-staging.trash2cash.lk/api"
```

### Production

```bash
# server/.env.production
DATABASE_URL="postgresql://user:pass@prod-db:5432/trash2cash"
JWT_SECRET="production-super-secure-secret-key"
NODE_ENV=production
CLIENT_URL="https://trash2cash.lk"

# client/.env.production
NEXT_PUBLIC_API_URL="https://api.trash2cash.lk/api"
```

## Docker Compose Environment

When using Docker Compose, create a `.env` file in the root:

```bash
# .env (root directory)
POSTGRES_USER=trash2cash
POSTGRES_PASSWORD=secure_password_here
POSTGRES_DB=trash2cash

JWT_SECRET=your-super-secret-jwt-key-min-32-chars

CLIENT_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3001/api
```

## Security Best Practices

<Warning>
  Never commit `.env` files to version control. Add them to `.gitignore`.
</Warning>

### .gitignore

```
# Environment files
.env
.env.local
.env.staging
.env.production
*.env
```

### Recommendations

1. **Use different secrets per environment** - Never share JWT secrets between dev/staging/prod
2. **Rotate secrets regularly** - Change JWT_SECRET periodically
3. **Use strong passwords** - Use password generators for database credentials
4. **Limit access** - Only give environment variables to services that need them
5. **Use secrets management** - In production, use AWS Secrets Manager, Vault, etc.

## Related Pages

<CardGroup cols={2}>
  <Card title="Docker" icon="docker" href="/deployment/docker">
    Docker Compose setup.
  </Card>
  <Card title="Production" icon="rocket" href="/deployment/production">
    Production deployment.
  </Card>
</CardGroup>
